pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
function _init()
  makeplayer()
  grav=3
end

function _update()
  friction()
  gravity()
end

function _draw()
  cls()
  drawmap()
  drawplayer()
  input()
  log()
end

function drawplayer()
  spr(p.spr,p.x,p.y)
end

function drawmap()
  map(0,0,0,0,16,16)
end

function ccols()
  if (mget((p.x+4)/8, (p.y+8)/8)==16)
    then return "d"
  end
end

function gravity()
  if (not standing()) then
    p.y+=grav
  end
end

function friction()
  if(p.xspd>0)then
    p.xspd-=1
    p.x+=p.xspd
    if(p.x==0)then
      p.x=128
    end
    if(p.x==128)then
      p.x=0
    end
  end
  if(p.xspd<0)then
    p.xspd+=1
    p.x+=p.xspd
  end
  if(p.yspd>0)then
    p.yspd-=1
    p.y-=p.yspd
  end
  if(p.yspd<0)then
    p.yspd+=1
    p.y+=p.yspd
  end
end

function input()
  --left
  if(btn(0)) then
    print("btn lft")
    if(p.xspd>-p.topspd) then
      p.xspd-=2
    end
  end
  --right
  if(btn(1)) then
    print("btn right")
    if(p.xspd<p.topspd)then
    	 p.xspd+=2
    end
  end
  --up
  if(btn(2)) then
    print(p.y)
    if(standing())then
      p.yspd-=10
    end
    print("btn up")
  end
  --down
  if(btn(3)) then
    print("btn down ")
  end
  --z
  if(btn(4)) then
    print("btn z")
  end
  --x
  if(btn(5)) then
    print("btn x")
  end
end
-->8
function log()
  print(p.xspd)
end

function makeplayer()
  p={}
  p.spr=1
  p.x=64
  p.y=64
  p.w,p.h=8,8
  p.xspd=0
  p.yspd=0
  p.topspd=3
end

function standing()
  if(ccols()=="d") then
    return true
  end
end

__gfx__
00000000009c9c0000c9c90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000009999000099990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000880000008800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000008884000048880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000080880400408808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700008888000088880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000004008000080040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000004008000080040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33b333b3000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
34434443000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44454444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444454000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
